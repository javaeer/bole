<template>
  <view class="page-container">
    <!-- é¡¶éƒ¨å“ç‰Œæ  -->
    <view class="brand-header">
      <view class="brand-info">
        <image src="/static/logo/bole-logo.png" class="logo" mode="aspectFit" />
        <text class="brand-name">ä¼¯ä¹ç®€å†</text>
      </view>
      <view class="search-box" @click="handleSearch">
        <text class="icon-search">ğŸ”</text>
        <text class="search-text">æœç´¢ç®€å†æ¨¡æ¿</text>
      </view>
    </view>

    <!-- è½®æ’­å›¾ -->
    <swiper class="banner-swiper" :indicator-dots="true" :autoplay="true" :interval="3000" :duration="500">
      <swiper-item v-for="(item, index) in bannerList" :key="index">
        <image :src="item.image" class="banner-image" mode="aspectFill" @click="handleBannerClick(item)" />
      </swiper-item>
    </swiper>

    <!-- åŠŸèƒ½å…¥å£ -->
    <view class="function-grid">
      <view class="grid-item" v-for="item in functionList" :key="item.id" @click="handleFunctionClick(item)">
        <view class="grid-icon">
          <text class="icon">{{ item.icon }}</text>
        </view>
        <text class="grid-text">{{ item.name }}</text>
      </view>
    </view>

    <!-- æ¨èæ¨¡æ¿ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">çƒ­é—¨ç®€å†æ¨¡æ¿</text>
        <text class="section-more" @click="handleMoreTemplates">æŸ¥çœ‹æ›´å¤š</text>
      </view>
      <scroll-view class="template-scroll" scroll-x="true">
        <view class="template-list">
          <view class="template-item" v-for="template in templateList" :key="template.id" @click="handleTemplateClick(template)">
            <image :src="template.cover" class="template-cover" mode="aspectFill" />
            <view class="template-info">
              <text class="template-name">{{ template.name }}</text>
              <text class="template-desc">{{ template.description }}</text>
              <view class="template-meta">
                <text class="template-price" v-if="template.price > 0">Â¥{{ template.price }}</text>
                <text class="template-free" v-else>å…è´¹</text>
                <text class="template-users">{{ template.users }}äººä½¿ç”¨</text>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- ä½¿ç”¨æŒ‡å— -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ä½¿ç”¨æŒ‡å—</text>
      </view>
      <view class="guide-list">
        <view class="guide-item" v-for="(guide, index) in guideList" :key="index">
          <text class="guide-number">{{ index + 1 }}</text>
          <view class="guide-content">
            <text class="guide-title">{{ guide.title }}</text>
            <text class="guide-desc">{{ guide.description }}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'

// è½®æ’­å›¾æ•°æ®
const bannerList = ref([
  {
    id: 1,
    image: '/static/banner/banner1.jpg',
    link: '/pages/template/list'
  },
  {
    id: 2,
    image: '/static/banner/banner2.jpg', 
    link: '/pages/guide/detail'
  },
  {
    id: 3,
    image: '/static/banner/banner3.jpg',
    link: '/pages/activity/detail'
  }
])

// åŠŸèƒ½åˆ—è¡¨
const functionList = ref([
  { id: 1, name: 'åˆ›å»ºç®€å†', icon: 'ğŸ“', path: '/pages/resume/create' },
  { id: 2, name: 'æ¨¡æ¿ä¸­å¿ƒ', icon: 'ğŸ¨', path: '/pages/template/list' },
  { id: 3, name: 'ç®€å†åˆ†æ', icon: 'ğŸ“Š', path: '/pages/analysis/index' },
  { id: 4, name: 'æ±‚èŒæŒ‡å—', icon: 'ğŸ“š', path: '/pages/guide/list' }
])

// æ¨¡æ¿åˆ—è¡¨
const templateList = ref([
  {
    id: 1,
    name: 'ç»å…¸ç®€çº¦',
    description: 'é€‚åˆåº”å±Šæ¯•ä¸šç”Ÿ',
    cover: '/static/template/classic.jpg',
    price: 0,
    users: 12543
  },
  {
    id: 2, 
    name: 'ä¸“ä¸šå•†åŠ¡',
    description: 'é€‚åˆèŒåœºäººå£«',
    cover: '/static/template/business.jpg',
    price: 9.9,
    users: 8765
  },
  {
    id: 3,
    name: 'åˆ›æ„è®¾è®¡',
    description: 'é€‚åˆè®¾è®¡å²—ä½',
    cover: '/static/template/creative.jpg',
    price: 19.9,
    users: 5432
  }
])

// æŒ‡å—åˆ—è¡¨
const guideList = ref([
  {
    title: 'é€‰æ‹©æ¨¡æ¿',
    description: 'ä»æµ·é‡æ¨¡æ¿ä¸­é€‰æ‹©é€‚åˆæ‚¨çš„ç®€å†æ ·å¼'
  },
  {
    title: 'å¡«å†™ä¿¡æ¯', 
    description: 'æŒ‰ç…§æŒ‡å¼•å¡«å†™æ‚¨çš„ä¸ªäººä¿¡æ¯å’Œå·¥ä½œç»å†'
  },
  {
    title: 'ç”Ÿæˆç®€å†',
    description: 'ä¸€é”®ç”Ÿæˆä¸“ä¸šç®€å†ï¼Œæ”¯æŒå¤šç§æ ¼å¼å¯¼å‡º'
  },
  {
    title: 'æŠ•é€’æ±‚èŒ',
    description: 'å°†æ‚¨çš„ç®€å†æŠ•é€’ç»™å¿ƒä»ªçš„ä¼ä¸š'
  }
])

// äº‹ä»¶å¤„ç†
const handleSearch = () => {
  uni.navigateTo({
    url: '/pages/search/index'
  })
}

const handleBannerClick = (item: any) => {
  uni.navigateTo({
    url: item.link
  })
}

const handleFunctionClick = (item: any) => {
  uni.navigateTo({
    url: item.path
  })
}

const handleTemplateClick = (template: any) => {
  uni.navigateTo({
    url: `/pages/template/detail?id=${template.id}`
  })
}

const handleMoreTemplates = () => {
  uni.navigateTo({
    url: '/pages/template/list'
  })
}

onMounted(() => {
  console.log('é¦–é¡µåŠ è½½å®Œæˆ')
})
</script>

<style scoped>
.page-container {
  background-color: #f8f8f8;
  min-height: 100vh;
}

.brand-header {
  padding: 20rpx 30rpx;
  background: linear-gradient(135deg, #d4af37 0%, #f7ef8a 100%);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.brand-info {
  display: flex;
  align-items: center;
}

.logo {
  width: 60rpx;
  height: 60rpx;
  margin-right: 20rpx;
}

.brand-name {
  font-size: 36rpx;
  font-weight: bold;
  color: #8b0000;
  font-family: 'SimSun', serif;
}

.search-box {
  flex: 1;
  max-width: 400rpx;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50rpx;
  padding: 15rpx 25rpx;
  display: flex;
  align-items: center;
  margin-left: 30rpx;
}

.icon-search {
  margin-right: 15rpx;
  font-size: 28rpx;
}

.search-text {
  color: #999;
  font-size: 28rpx;
}

.banner-swiper {
  height: 300rpx;
  margin: 20rpx 30rpx;
  border-radius: 20rpx;
  overflow: hidden;
}

.banner-image {
  width: 100%;
  height: 100%;
}

.function-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  padding: 40rpx 30rpx;
  background: white;
  margin: 20rpx 30rpx;
  border-radius: 20rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);
}

.grid-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.grid-icon {
  width: 80rpx;
  height: 80rpx;
  background: #f8f8f8;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 15rpx;
}

.grid-icon .icon {
  font-size: 40rpx;
}

.grid-text {
  font-size: 24rpx;
  color: #333;
}

.section {
  background: white;
  margin: 30rpx;
  border-radius: 20rpx;
  padding: 30rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30rpx;
}

.section-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
}

.section-more {
  font-size: 26rpx;
  color: #d4af37;
}

.template-scroll {
  white-space: nowrap;
}

.template-list {
  display: inline-flex;
}

.template-item {
  width: 300rpx;
  margin-right: 20rpx;
  background: #f8f8f8;
  border-radius: 15rpx;
  overflow: hidden;
}

.template-cover {
  width: 100%;
  height: 200rpx;
}

.template-info {
  padding: 20rpx;
}

.template-name {
  display: block;
  font-size: 28rpx;
  font-weight: bold;
  margin-bottom: 10rpx;
}

.template-desc {
  display: block;
  font-size: 24rpx;
  color: #666;
  margin-bottom: 15rpx;
}

.template-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.template-price {
  color: #ff6b6b;
  font-weight: bold;
}

.template-free {
  color: #d4af37;
  font-weight: bold;
}

.template-users {
  font-size: 22rpx;
  color: #999;
}

.guide-list {
  display: flex;
  flex-direction: column;
}

.guide-item {
  display: flex;
  align-items: flex-start;
  padding: 25rpx 0;
  border-bottom: 1rpx solid #f0f0f0;
}

.guide-item:last-child {
  border-bottom: none;
}

.guide-number {
  width: 50rpx;
  height: 50rpx;
  background: #d4af37;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24rpx;
  margin-right: 25rpx;
  flex-shrink: 0;
}

.guide-content {
  flex: 1;
}

.guide-title {
  display: block;
  font-size: 28rpx;
  font-weight: bold;
  margin-bottom: 10rpx;
}

.guide-desc {
  display: block;
  font-size: 24rpx;
  color: #666;
  line-height: 1.5;
}
</style>