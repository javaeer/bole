<script setup lang="ts">
import { onHide, onLaunch, onShow } from "@dcloudio/uni-app";
import { configHandler } from "@/utils/config";
import { dictHandler } from "@/utils/dict";

onLaunch(() => {
  console.log("App Launch");

  //æç¤ºï¼šonLaunch æ˜¯åº”ç”¨åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼Œå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼Œéžå¸¸é€‚åˆè¿›è¡Œåº”ç”¨çº§åˆ«çš„åˆå§‹åŒ–æ“ä½œã€‚
  // åˆå§‹åŒ–ç³»ç»Ÿé…ç½®

  /*configHandler.initConfigHandling()
    .then(() => {
      console.log("âœ… é…ç½®åˆå§‹åŒ–å®Œæˆï¼Œå¼€å§‹åŠ è½½å­—å…¸æ•°æ®");
    })
    .then(() => {
      console.log("ðŸ›¡ï¸ åŠ è½½ç³»ç»Ÿåç§°",configHandler.getConfigValue("system.name"));
    })
    .catch((error) => {
      console.error("âŒ é…ç½®åˆå§‹åŒ–å¤±è´¥:", error);
    });

  dictHandler.initDictHandling()
    .then(() => {
      console.log("âœ… å­—å…¸åˆå§‹åŒ–å®Œæˆã€‚");
    })
    .then(() => {
      console.log("ðŸ“Š åŠ è½½çš„å­—å…¸ç±»åž‹", dictHandler.getAllDictTypes());
    })
    .catch((error) => {
      console.error("âŒ å­—å…¸åˆå§‹åŒ–å¤±è´¥:", error);
    });*/

  Promise.all([
    configHandler.initConfigHandling(),
    dictHandler.initDictHandling()
  ]).then(() => {
    console.log("âœ… æ‰€æœ‰åˆå§‹åŒ–å®Œæˆ");
    console.log("ðŸ›¡ï¸ åŠ è½½ç³»ç»Ÿåç§°",configHandler.getConfigValue("system.name"));
    console.log("ðŸ“Š åŠ è½½çš„å­—å…¸ç±»åž‹", dictHandler.getAllDictTypes());
  }).catch((error) => {
    console.error("âŒ åˆå§‹åŒ–å¤±è´¥:", error);
  });
});
onShow(() => {
  console.log("App Show");
});
onHide(() => {
  console.log("App Hide");
});
</script>
<style lang="scss">
page {
  background: #f8f8f8;
}
</style>
